### ABI规定总结

#### 1. 寄存器使用约定

- 通用寄存器：8个8位寄存器（R0-R7）
  - R0: 返回值寄存器
  - R1-R4: 参数寄存器
  - R5-R7: 临时寄存器
- 专用寄存器：
  - 程序计数器（PC）：8位
  - 状态寄存器（SR）：8位
  - 堆栈指针（SP）：8位
  - 帧指针（FP）：8位

#### 2. 函数调用约定

- 参数传递：最多使用4个参数寄存器R1-R4。超过4个参数的部分通过堆栈传递。
- 返回值：函数的返回值存储在R0寄存器中。
- 寄存器保存约定：调用者保存（caller-save）R1-R4寄存器，调用者在调用函数前保存这些寄存器的值，并在函数返回后恢复。被调用者保存（callee-save）FP和SP寄存器。

#### 3. 堆栈管理

- 堆栈增长方向：堆栈从高地址向低地址增长。
- 堆栈帧布局：
  - 返回地址
  - 保存的帧指针（FP）
  - 局部变量和临时数据

#### 4. 中断处理

- 中断处理程序入口地址存储在一个固定位置的中断向量表中。
- 中断处理程序需要保存和恢复所有通用寄存器的状态。

#### 5. 存储器模型

- 内存：256字节（8位地址空间）
- 内存访问：字节对齐
